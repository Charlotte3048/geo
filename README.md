# 品牌GenAI认知指数分析引擎 (GEO)

**GEO (GenAI Equity Observer)** 是一个强大的、可配置的分析框架，旨在量化和追踪品牌在生成式AI（GenAI）模型认知中的“心智占有率”。

与传统的基于销量或市值的排行榜不同，本项目通过模拟真实用户的提问，自动化地调用大语言模型（LLM），并对返回结果进行多维度计分，从而构建一个反映品牌在AI知识库中影响力的动态排行榜。

---

## 核心理念

在AI时代，当用户越来越多地通过AI获取信息和购买建议时，一个品牌能否被AI频繁、优先、正面地提及，将直接影响其市场地位。本项目旨在衡量这一全新的、无形的品牌资产——**GenAI心智占有率**。

---

## 项目亮点

- **🚀 自动化工作流**: 从问题生成、数据采集到分析报告，实现端到端的自动化。
- **🧩 可配置分析**: 通过独立的 `config.yaml` 文件，轻松定义分析目标、品牌词典和计分权重，无需修改代码即可复用于任何行业。
- **🤖 智能品牌发现**: 内置独立的探索脚本，可利用LLM从海量文本中智能发现新的、未知的候选品牌，极大提升词典构建效率。
- **📊 多维度计分**: 采用先进的六维度计分模型（v8.0 绝对权重版），从**可见度、引用率、推荐度、引用深度、认知份额、竞争力**等角度全面评估品牌表现。
- **📋 详尽报告**: 自动生成包含**总榜单**和**各子品类分榜单**的Markdown报告，洞察品牌在不同领域的具体表现。
- **🌐 模型兼容性**: 基于OpenRouter、阿里云百炼等平台，可灵活切换使用包括Gemini, ChatGPT, 豆包, 千问在内的多种先进大语言模型。

---





---

## 方法论与评分体系

为保证榜单的科学性与参考价值，本项目引入了以下评分方法论与算法逻辑：

## 品牌AI认知指数榜单项目方法论与算法逻辑报告

### **一、项目目标与数据来源**

本项目旨在通过对国内主流大模型的问答结果进行量化分析，科学评估科学评估新能源汽车、5A级景区、手机、餐饮美食、零食饮料、美妆、奢侈品品类在人工智能生态中的心智占有率和品牌影响力。

**数据来源：**
本项目构建了国内首个跨 10 大主流 LLM 的品牌认知分析矩阵，模型包括：豆包、通义千问、Kimi、DeepSeek、智谱
GLM、文心一言、腾讯混元、科大讯飞星火，360智脑等，覆盖了当前国内 AI 领域的头部力量。

**数据采集：**
数据采集基于模拟用户在大模型搜索意图设计的 210 个多维度查询问题（每个品类 30个），覆盖了用户关注热点及多种场景等关键领域。通过对
2100条原始 AI 回答文本的深度分析，确保了品牌认知的全面性和客观性。采集过程克服了各模型 API 接口、认证机制（如 OpenAI 兼容、腾讯云
SDK、星火 WebSocket 签名）的差异，确保了数据的高可靠性和全面性。

### **二、六维加权评分体系**

榜单采用了一套六维加权评分体系（总分 100 分），对品牌在 AI 生态中的表现进行全面量化。该体系旨在超越简单的提及次数，深入评估
AI 对品牌的认知深度和推荐倾向。

| 维度名称         | 权重  | 核心衡量指标                    | 算法逻辑解释                                                             |
|:-------------|:----|:--------------------------|:-------------------------------------------------------------------|
| **品牌可见度**    | 20% | 实体首次出现的位置                 | 衡量实体在 AI 回答中首次出现的优先级。位置越靠前，得分越高，反映其在 AI 知识图谱中的“重要性”。               |
| **引用率**      | 20% | 实体被提及的总次数                 | 体现实体在所有回答内容中的“频率”和“活跃度”。                                           |
| **AI认知排行指数** | 20% | 基于大模型内部推荐强度（如置信度、偏好分数）的排序 | 反映模型对实体的“主观认可度”。采用最大值归一化结合 +1 平滑和开方平滑技术，以解决头部品牌得分过于集中和长尾品牌得分稀疏的问题。 |
| **正文引用率**    | 15% | 实体在正文中被引用的深度              | 衡量实体是否出现在核心段落、是否有详细描述。反映其“信息价值”。                                   |
| **AI认知份额**   | 15% | 该实体提及次数占所有同类实体总数的比例       | 反映实体在品类中的“市场份额”或“主导地位”。同样采用开方平滑处理，优化得分分布。                          |
| **竞争力指数**    | 10% | 品牌与其竞品在 AI 认知中的综合竞争力      | 衡量品牌在不同模型间的认知一致性和稳定性。                                              |

### **三、算法逻辑与优化细节**

#### **1. 核心评分计算**

所有六个维度的小分均被归一化至 0-100 分的区间。最终总分通过加权求和得出：

$$
\text{Total Score} = \sum_{i=1}^{6} (\text{Dimension Score}_i \times \text{Weight}_i)
$$

#### **2. 鲁棒性与平滑处理**

为确保榜单的科学性和鲁棒性，算法中引入了关键的非线性处理：

* **非线性归一化（开方平滑）：**
  针对AI认知排行指数和AI认知份额这两个易受极端值影响的维度，我们采用了开方平滑（Square Root Scaling）技术。
  $$
  \text{Score}_{\text{smoothed}} = \sqrt{\frac{\text{Raw Value}}{\text{Max Raw Value}}} \times 100
  $$
  这种处理方式能够有效压缩头部品牌的分值差距，同时拉开中长尾品牌的区分度，使得分分布更具科学性。

* 零分规避（+1 平滑）
  在计算AI认知排行指数和AI认知份额时，为避免原始值为零的品牌在开方处理后得分直接为零，我们引入了+1平滑技术（Smoothing），确保即使是极少被提及的品牌也能获得非零的认知得分，保证了模型的鲁棒性。

#### **3. 数据隔离与品牌识别**

* 品类隔离：数据采集和分析过程严格按品类（新能源汽车、5A 级景区）进行隔离，确保不同品类之间的分析结果互不干扰。
* 品牌识别：品牌识别依赖于一个预先构建且不断更新的品牌词典，该词典包含品牌标准名称及其所有别名。分析脚本通过匹配词典中的别名，将所有提及归一化到唯一的标准品牌名称下进行统计和评分。

## 项目架构与工作流

本项目遵循一个清晰、严谨的四步闭环工作流：

![工作流示意图](https://i.imgur.com/your-workflow-diagram.png )  <!-- 建议您后续可以创建一个流程图替换此链接 -->

1.  **数据采集 (`run_analysis.py`)**:
    *   **输入**: `questions.json` (预设的问题列表)。
    *   **过程**: 自动化调用LLM API，对每个问题进行提问。
    *   **输出**: `results.json` (包含AI原始回答和引用链接的数据库)。

2.  **品牌探索 (`explore_brands_pure.py`)**:
    *   **输入**: `results.json`。
    *   **过程**: 调用高性价比LLM（如 `google/gemini-2.5-flash`），从原始回答中智能提取所有可能的候选品牌。
    *   **输出**: `candidate_brands_pure_llm.txt` (一个干净的、按频率排序的候选品牌列表)。

3.  **人工决策 (`config_*.yaml`)**:
    *   **输入**: `candidate_brands_pure_llm.txt`。
    *   **过程**: **(关键人工环节)** 基于候选列表，创建或完善YAML配置文件。在此文件中，您需要：
        *   构建 `brand_dictionary` (品牌词典及其所有别名)。
        *   定义 `chinese_brands_whitelist` (哪些品牌需要被计分)。
    *   **输出**: 一个完整的配置文件，如 `config_home_appliances.yaml`。

4.  **分析与报告 (`analyze_results_final.py`)**:
    *   **输入**: `results.json` 和 `config_home_appliances.yaml`。
    *   **过程**: 加载配置，严格按照品牌词典和计分模型，对原始数据进行分组、计分和排名。
    *   **输出**: `ranking_report_home_appliances.md` (最终的、包含总榜单和子榜单的分析报告)。

---

## 如何使用

### 环境准备

1.  **克隆仓库**:
    ```bash
    git clone https://github.com/Charlotte3048/geo.git
    cd geo
    ```

2.  **创建并激活Python虚拟环境**:
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```

3.  **安装依赖**:
    ```bash
    pip install openai httpx pyyaml
    ```

4.  **设置API密钥**:
    本项目通过 [OpenRouter.ai](https://openrouter.ai/ ) 调用LLM。请在您的终端中设置API密钥：
    ```bash
    export OPENROUTER_API_KEY="sk-or-v1-..."
    ```

### 执行分析 (以家用电器品类为例)

1.  **准备问题列表**:
    确保 `questions.json` 文件存在，并包含您想要提问的问题。

2.  **第一步：采集数据**
    运行数据采集脚本。这将遍历所有问题并生成 `results.json`。
    ```bash
    python run_analysis.py
    ```

3.  **第二步：探索品牌**
    运行智能品牌探索脚本，生成候选品牌列表。
    ```bash
    python explore_brands_pure.py
    ```

4.  **第三步：创建配置文件**
    这是唯一需要手动编辑的步骤。
    - 打开 `candidate_brands_pure_llm.txt`。
    - 创建一个名为 `config_home_appliances.yaml` 的新文件。
    - 参考候选列表，仔细填写 `brand_dictionary` 和 `chinese_brands_whitelist`。

5.  **第四步：生成最终报告**
    运行最终的分析引擎，传入您刚刚创建的配置文件。
    ```bash
    python analyze_results_final.py --config config_home_appliances.yaml
    ```

    完成后，您将在项目根目录下找到最终的分析报告 `ranking_report_home_appliances.md`。

---

## 未来展望

- [ ] **前端可视化**: 开发一个基于Web的交互式仪表盘，以更直观的方式展示和筛选排行榜数据。
- [ ] **数据库集成**: 将 `results.json` 替换为SQLite或更专业级的数据库，以支持更大规模、更长时间的数据存储和趋势分析。
- [ ] **自动化调度**: 结合GitHub Actions或云函数，实现每日/每周的自动化分析，持续追踪品牌AI心智占有率的变化。
- [ ] **情感分析**: 在计分模型中加入情感分析维度，评估AI在提及品牌时的“语气”是积极、中立还是消极。

